Transcricao do Video:

Para darmos início à elaboração de nosso jogo, temos que começar pelo desenho do alvo.

Este objeto é construído pela função desenhaCirculo(), que já temos em nosso código:

<canvas width="600" height="400"></canvas>

<script>

    var tela = document.querySelector('canvas');
    var pincel = tela.getContext('2d');

    pincel.fillStyle = 'lightgray';
    pincel.fillRect(0, 0, 600, 400);

    function desenhaCirculo(x, y, raio) {

        pincel.fillStyle = 'blue';
        pincel.beginPath();
        pincel.arc(x, y, raio, 0, 2 * Math.PI);
        pincel.fill();

    }

    function limpaTela() {

        pincel.clearRect(0, 0, 600, 400);
    }
</script>

Ela deverá receber mais um parâmetro (a cor) e será utilizado no fillStyle. Temos isso porque haverá círculos na cor branca e vermelha:

<canvas width="600" height="400"></canvas>

<script>

    var tela = document.querySelector('canvas');
    var pincel = tela.getContext('2d');

    pincel.fillStyle = 'lightgray';
    pincel.fillRect(0, 0, 600, 400);

    function desenhaCirculo(x, y, raio, cor) {

        pincel.fillStyle = cor;
        pincel.beginPath();
        pincel.arc(x, y, raio, 0, 2 * Math.PI);
        pincel.fill();
    }

    function limpaTela() {

        pincel.clearRect(0, 0, 600, 400);

    }

</script>

Além disso, temos que saber que nosso raio padrão terá o valor inicial de 10, os demais serão maiores, para criar a imagem de um alvo.

Para efetivamente desenharmos o círculos, temos que chamar a função desenhaCirculo(), com os parâmetros x e y ambos com valor 100, raio 10 e a cor vermelha (red), já que estamos lidando com o círculo central:

<canvas width="600" height="400"></canvas>

<script>

    var tela = document.querySelector('canvas');
    var pincel = tela.getContext('2d');

    pincel.fillStyle = 'lightgray';
    pincel.fillRect(0, 0, 600, 400);

    function desenhaCirculo(x, y, raio, cor) {

        pincel.fillStyle = cor;
        pincel.beginPath();
        pincel.arc(x, y, raio, 0, 2 * Math.PI);
        pincel.fill();

    }

    function limpaTela() {

        pincel.clearRect(0, 0, 600, 400);

    }

    desenhaCirculo(100, 100, 10, 'red');

</script>

O próximo círculo será construído na mesma posição, entretanto, o seu raio será maior, equivalente a 30, e sua cor será branca (white):

<canvas width="600" height="400"></canvas>

<script>

    var tela = document.querySelector('canvas');
    var pincel = tela.getContext('2d');

    pincel.fillStyle = 'lightgray';
    pincel.fillRect(0, 0, 600, 400);

    function desenhaCirculo(x, y, raio, cor) {

        pincel.fillStyle = cor;
            pincel.beginPath();
        pincel.arc(x, y, raio, 0, 2 * Math.PI);
        pincel.fill();

    }

    function limpaTela() {

        pincel.clearRect(0, 0, 600, 400);

    }

    desenhaCirculo(100, 100, 10, 'red');
    desenhaCirculo(100, 100, 30, 'white');

</script>

Por fim, desenharemos um círculo ainda maior, com raio 40, e novamente na cor vermelha (red):

<canvas width="600" height="400"></canvas>

<script>

    var tela = document.querySelector('canvas');
    var pincel = tela.getContext('2d');

    pincel.fillStyle = 'lightgray';
    pincel.fillRect(0, 0, 600, 400);

    function desenhaCirculo(x, y, raio, cor) {

        pincel.fillStyle = cor;
        pincel.beginPath();
        pincel.arc(x, y, raio, 0, 2 * Math.PI);
        pincel.fill();

    }

    function limpaTela() {

        pincel.clearRect(0, 0, 600, 400);

    }

    desenhaCirculo(100, 100, 10, 'red');
    desenhaCirculo(100, 100, 30, 'white');
    desenhaCirculo(100, 100, 40, 'red');

</script>

Salvaremos e recarregaremos a página. Por que será exibido somente um círculo vermelho? Porque a última função que passamos foi para a criação de um círculo maior que todos os demais, assim, ela cobriu todas as outras. Como consertaremos isso?

Basta invertermos a ordem de chamamento das funções, se chamarmos o círculo vermelho maior primeiro, e o círculo vermelho menor por último, da seguinte forma:

<canvas width="600" height="400"></canvas>

<script>

    var tela = document.querySelector('canvas');
    var pincel = tela.getContext('2d');

    pincel.fillStyle = 'lightgray';
    pincel.fillRect(0, 0, 600, 400);

    function desenhaCirculo(x, y, raio, cor) {
    pincel.fillStyle = cor;
    pincel.beginPath();
    pincel.arc(x, y, raio, 0, 2 * Math.PI);
    pincel.fill();

    }

    function limpaTela() {

    pincel.clearRect(0, 0, 600, 400);
    }

    desenhaCirculo(100, 100, 40, 'red');
    desenhaCirculo(100, 100, 30, 'white');
    desenhaCirculo(100, 100, 10, 'red');

</script>

Aprimoraremos nosso código, usando o raio inicial de 10 como parâmetro, guardando-o em uma variável. Em seguida, acrescentaremos os valores necessários para compor os raios das demais circunferências. Criaremos a variável raio = 10 a seguir:

<canvas width="600" height="400"></canvas>

<script>

    var tela = document.querySelector('canvas');
    var pincel = tela.getContext('2d');

    pincel.fillStyle = 'lightgray';
    pincel.fillRect(0, 0, 600, 400);

    var raio = 10;

    function desenhaCirculo(x, y, raio, cor) {

        pincel.fillStyle = cor;
        pincel.beginPath();
        pincel.arc(x, y, raio, 0, 2 * Math.PI);
        pincel.fill();

    }

    function limpaTela() {

       pincel.clearRect(0, 0, 600, 400);
    }

    desenhaCirculo(100, 100, 40, 'red');
    desenhaCirculo(100, 100, 30, 'white');
    desenhaCirculo(100, 100, 10, 'red');

</script>

Nos chamamentos das funções, trocaremos os valores pela variável:

<canvas width="600" height="400"></canvas>

<script>

    var tela = document.querySelector('canvas');
    var pincel = tela.getContext('2d');

    pincel.fillStyle = 'lightgray';
    pincel.fillRect(0, 0, 600, 400);

    var raio = 10;

    function desenhaCirculo(x, y, raio, cor) {
        pincel.fillStyle = cor;
    pincel.beginPath();
    pincel.arc(x, y, raio, 0, 2 * Math.PI);
    pincel.fill();

    }

    function limpaTela() {

    pincel.clearRect(0, 0, 600, 400);
    }

    desenhaCirculo(100, 100, raio+20, 'red');
    desenhaCirculo(100, 100, raio+10, 'white');
    desenhaCirculo(100, 100, raio, 'red');

</script>

Salvaremos e recarregaremos a página. Pronto! Temos nosso alvo.

Com o alvo criado, precisamos fazer com que seu aparecimento seja aleatório, ou seja, que sejam criadas coordenadas arbitrárias. Para isso, vamos inserir as instruções para a criação do alvo dentro de uma nova função chamada desenhaAlvo(), e a chamaremos logo em seguida:

<canvas width="600" height="400"></canvas>

<script>

    var tela = document.querySelector('canvas');
    var pincel = tela.getContext('2d');

    pincel.fillStyle = 'lightgray';
    pincel.fillRect(0, 0, 600, 400);

    var raio = 10;

    function desenhaCirculo(x, y, raio, cor) {

        pincel.fillStyle = cor;
        pincel.beginPath();
        pincel.arc(x, y, raio, 0, 2 * Math.PI);
        pincel.fill();

    }

    function limpaTela() {

        pincel.clearRect(0, 0, 600, 400);
    }

    function desenhaAlvo() {

        desenhaCirculo(100, 100, raio+20, 'red');
        desenhaCirculo(100, 100, raio+10, 'white');
        desenhaCirculo(100, 100, raio, 'red');

    }

    desenhaAlvo();

</script>

Salvaremos e recarregaremos e podemos ver que o alvo permanece inalterado.

Como queremos que o alvo seja aleatório, a função desenhaAlvo() receberá parâmetros referentes às coordenadas X (até o limite de 600) e Y (até o limite de 400), com relação ao desenhaCirculo(), elas receberão estes parâmetros, respectivamente:

<canvas width="600" height="400"></canvas>

<script>

    var tela = document.querySelector('canvas');
    var pincel = tela.getContext('2d');

    pincel.fillStyle = 'lightgray';
    pincel.fillRect(0, 0, 600, 400);

    var raio = 10;

    function desenhaCirculo(x, y, raio, cor) {

    pincel.fillStyle = cor;
    pincel.beginPath();
    pincel.arc(x, y, raio, 0, 2 * Math.PI);
    pincel.fill();

    }

    function limpaTela() {
    pincel.clearRect(0, 0, 600, 400);

    }

    function desenhaAlvo(x, y) {
    desenhaCirculo(x, y, raio+20, 'red');
    desenhaCirculo(x, y, raio+10, 'white');
    desenhaCirculo(x, y, raio, 'red');

    }

    desenhaAlvo();

</script>

Para chamar o desenhaAlvo(), passaremos os parâmetros (200, 200):

<canvas width="600" height="400"></canvas>

<script>

    var tela = document.querySelector('canvas');
    var pincel = tela.getContext('2d');

    pincel.fillStyle = 'lightgray';
    pincel.fillRect(0, 0, 600, 400);

    var raio = 10;

    function desenhaCirculo(x, y, raio, cor) {

    pincel.fillStyle = cor;
    pincel.beginPath();
    pincel.arc(x, y, raio, 0, 2 * Math.PI);
    pincel.fill();

    }

    function limpaTela() {

    pincel.clearRect(0, 0, 600, 400);
    }

    function desenhaAlvo(x, y) {

    desenhaCirculo(x, y, raio+20, 'red');
    desenhaCirculo(x, y, raio+10, 'white');
    desenhaCirculo(x, y, raio, 'red');

    }

    desenhaAlvo(200, 200);

</script>

A posição do alvo variará de acordo com os valores que passarmos como parâmetros em desenhaAlvo(), passaremos, por exemplo (50, 200), e teremos uma posição diferente.

O próximo passo será fazer com que os valores das coordenadas sejam gerados aleatoriamente.

Criaremos uma função chamada sorteiaPosicao(), que receberá um valor maximo que pode sortear entre 0 a 600 (para o eixo X), e 0 a 400 (para o eixo Y):

<canvas width="600" height="400"></canvas>

<script>

    var tela = document.querySelector('canvas');
    var pincel = tela.getContext('2d');

    pincel.fillStyle = 'lightgray';
    pincel.fillRect(0, 0, 600, 400);

    var raio = 10;

    function desenhaCirculo(x, y, raio, cor) {

        pincel.fillStyle = cor;
        pincel.beginPath();
        pincel.arc(x, y, raio, 0, 2 * Math.PI);
        pincel.fill();

    }

    function limpaTela() {

        pincel.clearRect(0, 0, 600, 400);
    }

    function desenhaAlvo(x, y) {

        desenhaCirculo(x, y, raio+20, 'red');
        desenhaCirculo(x, y, raio+10, 'white');
        desenhaCirculo(x, y, raio, 'red');
    }

    function sorteiaPosicao(maximo) {

    }

    desenhaAlvo(50, 200);

</script>

Criaremos uma variável xAleatorio que recebe sorteiaPosicao, já que estamos trabalhando com a variável X, então o valor máximo será 600. Do mesmo modo, criaremos uma variável yAleatorio que receberá sorteiaPosicao, cujo máximo será 400:

<canvas width="600" height="400"></canvas>

<script>

    var tela = document.querySelector('canvas');
    var pincel = tela.getContext('2d');

    pincel.fillStyle = 'lightgray';
    pincel.fillRect(0, 0, 600, 400);

    var raio = 10;

    function desenhaCirculo(x, y, raio, cor) {
    pincel.fillStyle = cor;
    pincel.beginPath();
    pincel.arc(x, y, raio, 0, 2 * Math.PI);
    pincel.fill();

    }

    function limpaTela() {
    pincel.clearRect(0, 0, 600, 400);

    }

    function desenhaAlvo(x, y) {
    desenhaCirculo(x, y, raio+20, 'red');
    desenhaCirculo(x, y, raio+10, 'white');
    desenhaCirculo(x, y, raio, 'red');

}
    function sorteiaPosicao(maximo) {
    }

    var xAleatorio = sorteiaPosicao(600);
    var yAleatorio = sorteiaPosicao(400);

    desenhaAlvo(50, 200);

</script>

O próximo passo é passarmos estes valores para a função desenhaAlvo():

<canvas width="600" height="400"></canvas>

<script>

    var tela = document.querySelector('canvas');
    var pincel = tela.getContext('2d');

    pincel.fillStyle = 'lightgray';
    pincel.fillRect(0, 0, 600, 400);

    var raio = 10;

    function desenhaCirculo(x, y, raio, cor) {
        pincel.fillStyle = cor;
    pincel.beginPath();
    pincel.arc(x, y, raio, 0, 2 * Math.PI);
    pincel.fill();
    }

    function limpaTela() {
    pincel.clearRect(0, 0, 600, 400);

    }

    function desenhaAlvo(x, y) {

    desenhaCirculo(x, y, raio+20, 'red');
    desenhaCirculo(x, y, raio+10, 'white');
    desenhaCirculo(x, y, raio, 'red');
    }

     function sorteiaPosicao(maximo) {

     }

    var xAleatorio = sorteiaPosicao(600);
    var yAleatorio = sorteiaPosicao(400);

    desenhaAlvo(xAleatorio, yAleatorio);

</script>

Ainda precisamos programar a função sorteiaPosicao(). Ela nos dará um retorno - return - de Math.floor, que arredonda o número para baixo, diferente do Math.round, que o arredonda para cima. Em seguida temos `Math.random() * maximo):

<canvas width="600" height="400"></canvas>

<script>

    var tela = document.querySelector('canvas');
    var pincel = tela.getContext('2d');

    pincel.fillStyle = 'lightgray';
    pincel.fillRect(0, 0, 600, 400);

    var raio = 10;

    function desenhaCirculo(x, y, raio, cor) {

        pincel.fillStyle = cor;
    pincel.beginPath();
    pincel.arc(x, y, raio, 0, 2 * Math.PI);
    pincel.fill();

    }

    function limpaTela() {
        pincel.clearRect(0, 0, 600, 400);
    }

    function desenhaAlvo(x, y) {

    desenhaCirculo(x, y, raio+20, 'red');
    desenhaCirculo(x, y, raio+10, 'white');
    desenhaCirculo(x, y, raio, 'red');

    }

    function sorteiaPosicao(maximo) {

    return Math.floor(Math.random() * maximo);

    }

    var xAleatorio = sorteiaPosicao(600);
    var yAleatorio = sorteiaPosicao(400);

    desenhaAlvo(xAleatorio, yAleatorio);

</script>

Sempre que salvarmos e recarregaremos a página, o alvo aparecerá em um novo ponto do nosso <canvas>.

Nosso próximo objetivo será fazer com que o alvo seja redesenhado em certos intervalos de tempo, pré-determinados.

Para isso, criaremos uma função atualizaTela(), que receberá as variáveis referentes ao X e Y aleatórios, bem como o chamamento de desenhaAlvo, da seguinte forma:

<canvas width="600" height="400"></canvas>

<script>

    var tela = document.querySelector('canvas');
    var pincel = tela.getContext('2d');

    pincel.fillStyle = 'lightgray';
    pincel.fillRect(0, 0, 600, 400);

    var raio = 10;

    function desenhaCirculo(x, y, raio, cor) {

    pincel.fillStyle = cor;
    pincel.beginPath();
    pincel.arc(x, y, raio, 0, 2 * Math.PI);
    pincel.fill();

    }

    function limpaTela() {
        pincel.clearRect(0, 0, 600, 400);
    }

    function desenhaAlvo(x, y) {

    desenhaCirculo(x, y, raio+20, 'red');
    desenhaCirculo(x, y, raio+10, 'white');
    desenhaCirculo(x, y, raio, 'red');

    }

    function sorteiaPosicao(maximo) {
    return Math.floor(Math.random() * maximo);
    }

    function atualizaTela() {

    var xAleatorio = sorteiaPosicao(600);
    var yAleatorio = sorteiaPosicao(400);
    desenhaAlvo(xAleatorio, yAleatorio);

    }

</script>

Em seguida, utilizaremos o setInterval(), com os parâmetros atualizaTela e o intervalo de tempo 500, sem esquecer de incluir na função o limpaTela:

<canvas width="600" height="400"></canvas>

<script>

    var tela = document.querySelector('canvas');
    var pincel = tela.getContext('2d');

    pincel.fillStyle = 'lightgray';
    pincel.fillRect(0, 0, 600, 400);

    var raio = 10;

    function desenhaCirculo(x, y, raio, cor) {

    pincel.fillStyle = cor;
    pincel.beginPath();
    pincel.arc(x, y, raio, 0, 2 * Math.PI);
    pincel.fill();

    }

    function limpaTela() {
        pincel.clearRect(0, 0, 600, 400);

    }

    function desenhaAlvo(x, y) {
        desenhaCirculo(x, y, raio+20, 'red');
    desenhaCirculo(x, y, raio+10, 'white');
    desenhaCirculo(x, y, raio, 'red');

   }

    function sorteiaPosicao(maximo) {

    return Math.floor(Math.random() * maximo);
    }

    function atualizaTela() {
    limpaTela();

        var xAleatorio = sorteiaPosicao(600);
    var yAleatorio = sorteiaPosicao(400);
    desenhaAlvo(xAleatorio, yAleatorio);

    }

    setInterval(atualizaTela, 500);

</script>

Salvaremos e recarregaremos. Pronto! Temos nosso alvo viajando pela tela, em pontos aleatórios. Como ainda está rápido, trocaremos o intervalo de tempo para 1000:

<canvas width="600" height="400"></canvas>

<script>

    var tela = document.querySelector('canvas');
    var pincel = tela.getContext('2d');

    pincel.fillStyle = 'lightgray';
    pincel.fillRect(0, 0, 600, 400);

    var raio = 10;

    function desenhaCirculo(x, y, raio, cor) {

        pincel.fillStyle = cor;
        pincel.beginPath();
        pincel.arc(x, y, raio, 0, 2 * Math.PI);
        pincel.fill();

   }

    function limpaTela() {
    pincel.clearRect(0, 0, 600, 400);

    }

    function desenhaAlvo(x, y) {

    desenhaCirculo(x, y, raio+20, 'red');
    desenhaCirculo(x, y, raio+10, 'white');
    desenhaCirculo(x, y, raio, 'red');

    }

    function sorteiaPosicao(maximo) {

        return Math.floor(Math.random() * maximo);

    }

    function atualizaTela() {
    limpaTela();
    var xAleatorio = sorteiaPosicao(600);
    var yAleatorio = sorteiaPosicao(400);
    desenhaAlvo(xAleatorio, yAleatorio);
    }

    setInterval(atualizaTela, 1000);

</script>

Nosso próximo objetivo é tornar o objeto responsivo ao clique, com o alerta de que o usuário acertou ao clicar sobre o alvo.

